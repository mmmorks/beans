<EXTREMELY_IMPORTANT>
# Beans Usage Guide

This project uses **beans**, an agentic-first issue tracker. Issues are called "beans". Use the `beans` CLI to manage them.

**Always use beans instead of TodoWrite or todo lists for work tracking.**

## Workflow

1. **Before starting work**: Check for existing beans, or create one: `beans create "Fix login bug" -t bug -d "Users cannot log in when..." -s in-progress`
2. **While working**: Keep the bean updated. If it has a checklist, check off items as you complete them.
3. **When done**: Mark complete with `beans update <id> -s completed`
4. **When committing**: Include bean file changes with your code commits.

If you identify follow-up work, create a new bean instead of doing it immediately.
</EXTREMELY_IMPORTANT>

## GraphQL Queries

The `beans query` command allows advanced querying using GraphQL. Unlike the other CLI commands listed below, GraphQL allows you to:

- Fetch exactly the fields you need, across a potentially large set of beans
- Directly read all fields (including `body`) and relationships
- Traverse relationships in a single query
- `beans query --help` for syntax and usage details
- `beans query --schema` to view the full GraphQL schema

```bash
# Get all actionable beans with their details
beans query '{ beans(filter: { excludeStatus: ["completed", "scrapped"] }) { id title status type body } }'

# Get a single bean with its relationships
beans query '{ bean(id: "bean-abc") { title body parent { title } children { id title status } } }'

# Find high-priority bugs
beans query '{ beans(filter: { type: ["bug"], priority: ["critical", "high"] }) { id title } }'

# Search with text
beans query '{ beans(filter: { search: "authentication" }) { id title body } }'

# Search across all beans including archived (project memory)
beans query --with-archived '{ beans(filter: { search: "authentication" }) { id title status body } }'
```

## CLI Commands

```bash
# List beans (default excludes completed/scrapped)
beans list
beans list -t bug -s todo              # Filter by type and status
beans list --no-status completed       # Exclude specific status
beans list -S "authentication"         # Full-text search

# View a bean
beans show <id>

# Create a bean (always specify -t type)
beans create "Title" -t task -d "Description..." -s todo

# Update a bean
beans update <id> -s in-progress       # Change status
beans update <id> --parent <other-id>  # Set parent relationship
beans update <id> --blocking <other-id> # Mark as blocking another bean

# Archive completed/scrapped beans (only when user requests)
beans archive
```

Use `beans <command> --help` for full options. Use `--json` for machine-readable output.

## Archived Beans (Project Memory)

Use `--with-archived` to include archived beans when searching for past decisions:

```bash
beans list --with-archived                     # List all beans including archived
beans list --with-archived -S "authentication" # Search across all beans
beans show --with-archived <id>                # View an archived bean
```


## Relationships

- **Parent**: Hierarchy (milestone → epic → feature → task/bug). Set with `--parent <id>`.
- **Blocking**: Dependencies. Set with `--blocking <id>` to indicate this bean blocks another.

## Issue Types

This project has the following issue types configured. Always specify a type with `-t` when creating beans:
{{range .Types}}
- **{{.Name}}**{{if .Description}}: {{.Description}}{{end}}
{{- end}}

## Statuses

This project has the following statuses configured:
{{range .Statuses}}
- **{{.Name}}**{{if .Description}}: {{.Description}}{{end}}
{{- end}}

## Priorities

Beans can have an optional priority. Use `-p` when creating or `--priority` when updating:
{{range .Priorities}}
- **{{.Name}}**{{if .Description}}: {{.Description}}{{end}}
{{- end}}

Beans without a priority are treated as `normal` priority for sorting purposes.
